<div class="panel play-panel">
  @if (status() === 'lobby') {
    <div class="kicker">Participant Interface</div>
    <h1>Respond instinctively</h1>
  }

  @if (status() === 'lobby') {
    <p class="muted">Waiting for the host to begin the scan.</p>
  } @else if (status() === 'running' && countdownActive()) {
    <div class="countdown-panel" aria-live="polite">
      <div class="kicker">Scan begins in</div>
      <div class="countdown-value">{{ countdownLeft() }}</div>
      <p class="muted">Get ready to respond instinctively.</p>
    </div>
  } @else if (status() === 'running' && question() && !isFinished()) {
    <div class="question-block">
      <div class="question-meta">
        <span>Question {{ currentIndex() + 1 }} / {{ questions().length }}</span>
        <span class="timer">{{ timeLeft() }}s</span>
      </div>
      @if (error()) {
        <div class="alert">{{ error() }}</div>
      }
      <h2>{{ question()?.text }}</h2>
      <div class="options">
        @for (option of question()?.options; track option.id) {
          <button
            class="option-button"
            [class.selected]="selectedOption() === option.id"
            (click)="selectOption(option.id)"
            [disabled]="selectedOption() !== null"
            type="button"
          >
            <span class="tag">{{ option.label }}</span>
            <span>{{ option.text }}</span>
          </button>
        }
      </div>
    </div>
  } @else if (status() === 'running' && isFinished()) {
    <p class="muted">All responses submitted. Awaiting final reveal.</p>
  } @else {
    <p class="muted">Awaiting final reveal.</p>
  }
</div>
